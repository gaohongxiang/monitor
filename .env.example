# 多源监控系统 - 环境变量配置模板
# 支持Twitter和Binance监控，可独立启用或同时运行
# 复制此文件为 .env 并填入实际值

# ===== 模块控制开关 =====
# 可以独立启用或禁用各个监控模块
TWITTER_ENABLED=true
BINANCE_ENABLED=true

# ===== 通用配置 =====

# 钉钉机器人访问令牌（必需）
DINGTALK_ACCESS_TOKEN=your_dingtalk_access_token_here

# PostgreSQL数据库连接URL（仅Twitter监控需要）
# 格式: postgresql://用户名:密码@主机:端口/数据库名
# 注意：Binance监控不使用数据库，直接推送通知
DATABASE_URL=postgresql://postgres.xxx:your_password@aws-0-us-west-1.pooler.supabase.com:6543/postgres

# ===== Binance监控配置 =====
# 如果启用Binance监控 (BINANCE_ENABLED=true)，需要配置以下API密钥

# Binance API密钥（从Binance账户获取）
BINANCE_API_KEY=your_binance_api_key_here
BINANCE_SECRET_KEY=your_binance_secret_key_here
# 代理配置（如果需要）
BINANCE_PROXY_URL=socks5代理服务器地址

# ===== DeepL翻译配置 =====
# DeepL API密钥（用于翻译Binance公告等内容）
DEEPL_API_KEY=your_deepl_api_key_here

# ===== Twitter监控配置 =====
# 如果启用Twitter监控 (TWITTER_ENABLED=true)，需要配置以下API凭证

# Twitter API凭证配置（JSON格式 - 嵌套结构）
# 按监控用户分组，减少配置冗余，每个用户可以有多个API凭证
# 注意：本地.env文件需要外层引号，Railway等云平台不需要引号
API_CREDENTIALS='[
  {
    "monitorUser": "binancezh",
    "credentials": [
      {
        "username": "X用户名1",
        "clientId": "Twitter_API_客户端ID_1",
        "clientSecret": "Twitter_API_客户端密钥_1",
        "redirectUri": "OAuth重定向URI",
        "browserId": "比特指纹浏览器ID_1",
        "proxyUrl": "socks5代理服务器地址_1"
      },
      {
        "username": "X用户名2",
        "clientId": "Twitter_API_客户端ID_2",
        "clientSecret": "Twitter_API_客户端密钥_2",
        "redirectUri": "OAuth重定向URI",
        "browserId": "比特指纹浏览器ID_2",
        "proxyUrl": "socks5代理服务器地址_2"
      }
    ]
  },
  {
    "monitorUser": "elonmusk",
    "credentials": [
      {
        "username": "X用户名3",
        "clientId": "Twitter_API_客户端ID_3",
        "clientSecret": "Twitter_API_客户端密钥_3",
        "redirectUri": "OAuth重定向URI",
        "browserId": "比特指纹浏览器ID_3",
        "proxyUrl": "socks5代理服务器地址_3"
      }
    ]
  }
]'

# ===== 可选配置 =====

# Twitter监控时间控制（仅生产环境使用，仅影响Twitter监控）
MONITOR_START_TIME=09:00  # 监控开始时间 (HH:MM格式，北京时间UTC+8)
MONITOR_END_TIME=23:00    # 监控结束时间 (HH:MM格式，北京时间UTC+8)

# Twitter API请求频率控制
DAILY_REQUESTS_PER_API=3  # 每个API每天的请求次数 (默认3次，免费版限制)

# ===== 配置说明 =====
#
# 1. 模块独立性：
#    - Twitter监控：需要数据库、API凭证、时间控制
#    - Binance监控：只需要API密钥，实时WebSocket连接，无数据库
#
# 2. 通知机制：
#    - 两个模块都使用相同的钉钉机器人推送通知
#    - 通知消息包含关键词 "." 以满足钉钉机器人要求
#
# 3. 启用组合：
#    - 只启用Twitter：TWITTER_ENABLED=true, BINANCE_ENABLED=false
#    - 只启用Binance：TWITTER_ENABLED=false, BINANCE_ENABLED=true
#    - 同时启用：TWITTER_ENABLED=true, BINANCE_ENABLED=true